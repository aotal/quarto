<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="es" xml:lang="es"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Fine-tuning de LLM en el entorno de las ciencias de la salud - Fine-tuning de LLM en el entorno de las ciencias de la salud</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "Sin resultados",
    "search-matching-documents-text": "documentos encontrados",
    "search-copy-link-title": "Copiar el enlace en la búsqueda",
    "search-hide-matches-text": "Ocultar resultados adicionales",
    "search-more-match-text": "resultado adicional en este documento",
    "search-more-matches-text": "resultados adicionales en este documento",
    "search-clear-button-title": "Borrar",
    "search-detached-cancel-button-title": "Cancelar",
    "search-submit-button-title": "Enviar",
    "search-label": "Buscar"
  }
}</script>


<link rel="stylesheet" href="styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title"><em>Fine-tuning</em> de LLM en el entorno de las ciencias de la salud</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Buscar"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Navegación de palanca" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link active" href="./index.html" rel="" target="" aria-current="page">
 <span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./about.html" rel="" target="">
 <span class="menu-text">Enlaces</span></a>
  </li>  
</ul>
            <div class="quarto-navbar-tools ms-auto">
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">En esta página</h2>
   
  <ul>
  <li><a href="#introducción." id="toc-introducción." class="nav-link active" data-scroll-target="#introducción.">Introducción.</a>
  <ul class="collapse">
  <li><a href="#entorno-de-pruebas" id="toc-entorno-de-pruebas" class="nav-link" data-scroll-target="#entorno-de-pruebas">Entorno de pruebas</a></li>
  <li><a href="#pasos-para-registrar-el-token-de-hugging-face-en-google-colab" id="toc-pasos-para-registrar-el-token-de-hugging-face-en-google-colab" class="nav-link" data-scroll-target="#pasos-para-registrar-el-token-de-hugging-face-en-google-colab">Pasos para registrar el token de Hugging Face en Google Colab</a></li>
  <li><a href="#explora-y-aprende" id="toc-explora-y-aprende" class="nav-link" data-scroll-target="#explora-y-aprende">Explora y Aprende</a></li>
  </ul></li>
  <li><a href="#modelo-general-mistralaimistral-7b-instruct-v0.1" id="toc-modelo-general-mistralaimistral-7b-instruct-v0.1" class="nav-link" data-scroll-target="#modelo-general-mistralaimistral-7b-instruct-v0.1">Modelo general: mistralai/Mistral-7B-Instruct-v0.1</a>
  <ul class="collapse">
  <li><a href="#nefrología" id="toc-nefrología" class="nav-link" data-scroll-target="#nefrología">Nefrología</a>
  <ul class="collapse">
  <li><a href="#context" id="toc-context" class="nav-link" data-scroll-target="#context">Context</a></li>
  <li><a href="#question" id="toc-question" class="nav-link" data-scroll-target="#question">Question</a></li>
  <li><a href="#answer" id="toc-answer" class="nav-link" data-scroll-target="#answer">Answer</a></li>
  </ul></li>
  <li><a href="#trauma" id="toc-trauma" class="nav-link" data-scroll-target="#trauma">Trauma</a>
  <ul class="collapse">
  <li><a href="#context-1" id="toc-context-1" class="nav-link" data-scroll-target="#context-1">Context</a></li>
  <li><a href="#question-1" id="toc-question-1" class="nav-link" data-scroll-target="#question-1">Question</a></li>
  <li><a href="#answer-1" id="toc-answer-1" class="nav-link" data-scroll-target="#answer-1">Answer</a></li>
  </ul></li>
  <li><a href="#endocrinología" id="toc-endocrinología" class="nav-link" data-scroll-target="#endocrinología">Endocrinología</a>
  <ul class="collapse">
  <li><a href="#question-2" id="toc-question-2" class="nav-link" data-scroll-target="#question-2">Question</a></li>
  <li><a href="#answer-2" id="toc-answer-2" class="nav-link" data-scroll-target="#answer-2">Answer</a></li>
  </ul></li>
  <li><a href="#anestesiología" id="toc-anestesiología" class="nav-link" data-scroll-target="#anestesiología">Anestesiología</a>
  <ul class="collapse">
  <li><a href="#context-2" id="toc-context-2" class="nav-link" data-scroll-target="#context-2">Context</a></li>
  <li><a href="#question-3" id="toc-question-3" class="nav-link" data-scroll-target="#question-3">Question</a></li>
  <li><a href="#answer-3" id="toc-answer-3" class="nav-link" data-scroll-target="#answer-3">Answer</a></li>
  </ul></li>
  </ul></li>
  <li><a href="#modelo-específico-biomistralbiomistral-7b" id="toc-modelo-específico-biomistralbiomistral-7b" class="nav-link" data-scroll-target="#modelo-específico-biomistralbiomistral-7b">Modelo específico: BioMistral/BioMistral-7B</a>
  <ul class="collapse">
  <li><a href="#nefrología-1" id="toc-nefrología-1" class="nav-link" data-scroll-target="#nefrología-1">Nefrología</a>
  <ul class="collapse">
  <li><a href="#context-3" id="toc-context-3" class="nav-link" data-scroll-target="#context-3">Context</a></li>
  <li><a href="#question-4" id="toc-question-4" class="nav-link" data-scroll-target="#question-4">Question</a></li>
  <li><a href="#explanation" id="toc-explanation" class="nav-link" data-scroll-target="#explanation">Explanation</a></li>
  </ul></li>
  <li><a href="#trauma-1" id="toc-trauma-1" class="nav-link" data-scroll-target="#trauma-1">Trauma</a>
  <ul class="collapse">
  <li><a href="#context-4" id="toc-context-4" class="nav-link" data-scroll-target="#context-4">Context</a></li>
  <li><a href="#question-5" id="toc-question-5" class="nav-link" data-scroll-target="#question-5">Question</a></li>
  <li><a href="#analysis" id="toc-analysis" class="nav-link" data-scroll-target="#analysis">Analysis</a></li>
  </ul></li>
  <li><a href="#endocrinología-1" id="toc-endocrinología-1" class="nav-link" data-scroll-target="#endocrinología-1">Endocrinología</a>
  <ul class="collapse">
  <li><a href="#context-5" id="toc-context-5" class="nav-link" data-scroll-target="#context-5">Context</a></li>
  <li><a href="#question-6" id="toc-question-6" class="nav-link" data-scroll-target="#question-6">Question</a></li>
  </ul></li>
  <li><a href="#anestesiología-1" id="toc-anestesiología-1" class="nav-link" data-scroll-target="#anestesiología-1">Anestesiología</a>
  <ul class="collapse">
  <li><a href="#context-6" id="toc-context-6" class="nav-link" data-scroll-target="#context-6">Context</a></li>
  <li><a href="#question-7" id="toc-question-7" class="nav-link" data-scroll-target="#question-7">Question</a></li>
  <li><a href="#results" id="toc-results" class="nav-link" data-scroll-target="#results">Results</a></li>
  </ul></li>
  </ul></li>
  <li><a href="#modelo-específico-contactdoctorbio-medical-llama-3-8b" id="toc-modelo-específico-contactdoctorbio-medical-llama-3-8b" class="nav-link" data-scroll-target="#modelo-específico-contactdoctorbio-medical-llama-3-8b">Modelo específico: ContactDoctor/Bio-Medical-Llama-3-8B</a>
  <ul class="collapse">
  <li><a href="#nefrología-2" id="toc-nefrología-2" class="nav-link" data-scroll-target="#nefrología-2">Nefrología</a>
  <ul class="collapse">
  <li><a href="#context-7" id="toc-context-7" class="nav-link" data-scroll-target="#context-7">Context</a></li>
  <li><a href="#question-8" id="toc-question-8" class="nav-link" data-scroll-target="#question-8">Question</a></li>
  <li><a href="#answer-4" id="toc-answer-4" class="nav-link" data-scroll-target="#answer-4">Answer</a></li>
  </ul></li>
  <li><a href="#trauma-2" id="toc-trauma-2" class="nav-link" data-scroll-target="#trauma-2">Trauma</a>
  <ul class="collapse">
  <li><a href="#context-8" id="toc-context-8" class="nav-link" data-scroll-target="#context-8">Context</a></li>
  <li><a href="#question-9" id="toc-question-9" class="nav-link" data-scroll-target="#question-9">Question</a></li>
  <li><a href="#answer-5" id="toc-answer-5" class="nav-link" data-scroll-target="#answer-5">Answer</a></li>
  </ul></li>
  <li><a href="#endocrinología-2" id="toc-endocrinología-2" class="nav-link" data-scroll-target="#endocrinología-2">Endocrinología</a>
  <ul class="collapse">
  <li><a href="#context-9" id="toc-context-9" class="nav-link" data-scroll-target="#context-9">Context</a></li>
  <li><a href="#question-10" id="toc-question-10" class="nav-link" data-scroll-target="#question-10">Question</a></li>
  <li><a href="#answer-6" id="toc-answer-6" class="nav-link" data-scroll-target="#answer-6">Answer</a></li>
  </ul></li>
  <li><a href="#anestesiología-2" id="toc-anestesiología-2" class="nav-link" data-scroll-target="#anestesiología-2">Anestesiología</a>
  <ul class="collapse">
  <li><a href="#context-10" id="toc-context-10" class="nav-link" data-scroll-target="#context-10">Context</a></li>
  <li><a href="#question-11" id="toc-question-11" class="nav-link" data-scroll-target="#question-11">Question</a></li>
  <li><a href="#answer-7" id="toc-answer-7" class="nav-link" data-scroll-target="#answer-7">Answer</a></li>
  </ul></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Fine-tuning de LLM en el entorno de las ciencias de la salud</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<section id="introducción." class="level1">
<h1>Introducción.</h1>
<p>Este espacio ha sido diseñado como un recurso educativo para explorar el uso de modelos de lenguaje (LLMs) aplicados al ámbito médico. Aquí encontrarás ejemplos prácticos obtenidos al interactuar con modelos alojados en Hugging Face, analizando sus respuestas frente a preguntas específicas de diversas especialidades médicas. Todo esto se realiza mediante un notebook de Google Colab, al que puedes acceder desde <a href="https://colab.research.google.com/drive/1Y1uWnLYlDgnPjJiFSd4FezhonMZkMeK-?usp=sharing">este enlace</a>.</p>
<section id="entorno-de-pruebas" class="level2">
<h2 class="anchored" data-anchor-id="entorno-de-pruebas">Entorno de pruebas</h2>
<p>Los experimentos se realizaron utilizando una GPU NVIDIA A100, una tarjeta de última generación que ofrece un rendimiento excepcional para tareas de inteligencia artificial, pero que también implica un costo elevado. Este detalle subraya la importancia de optimizar los recursos cuando se trabaja con IA.</p>
</section>
<section id="pasos-para-registrar-el-token-de-hugging-face-en-google-colab" class="level2">
<h2 class="anchored" data-anchor-id="pasos-para-registrar-el-token-de-hugging-face-en-google-colab">Pasos para registrar el token de Hugging Face en Google Colab</h2>
<p>Para interactuar con los modelos de Hugging Face en el notebook de Google Colab, es necesario configurar tu token de acceso como un secreto en el entorno de trabajo. Sigue estos pasos para hacerlo:</p>
<ol type="1">
<li><p><strong>Crear una cuenta en Hugging Face</strong><br>
Si aún no tienes una cuenta, regístrate en <a href="https://huggingface.co">Hugging Face</a>.</p></li>
<li><p><strong>Generar tu token de acceso</strong></p>
<ul>
<li>Una vez iniciada tu sesión, ve a tu perfil en Hugging Face y selecciona <strong>Settings</strong>.<br>
</li>
<li>En el menú lateral, elige <strong>Access Tokens</strong>.<br>
</li>
<li>Haz clic en <strong>New Token</strong>, dale un nombre identificativo y selecciona el nivel de permiso adecuado (normalmente, <em>Read</em> es suficiente).<br>
</li>
<li>Copia el token generado.</li>
</ul></li>
<li><p><strong>Abrir el notebook en Colab</strong></p>
<ul>
<li>Accede al notebook proporcionado en el enlace de esta página.</li>
</ul></li>
<li><p><strong>Configurar el token como un secreto</strong></p>
<ul>
<li><p>En el notebook, identifica la celda que solicita el token de Hugging Face.<br>
</p></li>
<li><p>Ejecuta esta celda que incluye el siguiente código:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> google.colab <span class="im">import</span> drive</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>drive.mount(<span class="st">'/content/drive'</span>)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> os</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>os.environ[<span class="st">"HF_TOKEN"</span>] <span class="op">=</span> <span class="st">"tu_token_aquí"</span></span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Reemplaza <code>"tu_token_aquí"</code> con el token generado en Hugging Face.</p></li>
<li><p>Alternativamente, utiliza el siguiente comando para establecer el token como un secreto temporal, válido solo durante tu sesión en Colab:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="op">!</span>huggingface<span class="op">-</span>cli login</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Esto abrirá un cuadro de diálogo donde podrás pegar tu token directamente.</p></li>
</ul></li>
</ol>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Tip
</div>
</div>
<div class="callout-body-container callout-body">
<p>Si deseas guardar el token de forma permanente para evitar repetir este paso en futuras sesiones, puedes hacerlo editando directamente tu archivo de configuración del entorno en Google Drive, siguiendo las instrucciones avanzadas en la documentación.</p>
</div>
</div>
<p>Con estos pasos, ya estarás listo para explorar el potencial de los modelos LLM en el ámbito médico desde el entorno de Google Colab. ¡Disfruta aprendiendo!</p>
</section>
<section id="explora-y-aprende" class="level2">
<h2 class="anchored" data-anchor-id="explora-y-aprende">Explora y Aprende</h2>
<p>El notebook interactivo está diseñado para que puedas replicar las pruebas y formular tus propias preguntas a los modelos. Aunque se han utilizado recursos avanzados, como la A100, el notebook también puede adaptarse para funcionar en otros entornos con capacidades más limitadas, aunque con tiempos de respuesta mayores.</p>
</section>
</section>
<section id="modelo-general-mistralaimistral-7b-instruct-v0.1" class="level1">
<h1>Modelo general: <a href="https://huggingface.co/mistralai/Mistral-7B-Instruct-v0.1">mistralai/Mistral-7B-Instruct-v0.1</a></h1>
<section id="nefrología" class="level2">
<h2 class="anchored" data-anchor-id="nefrología">Nefrología</h2>
<section id="context" class="level3">
<h3 class="anchored" data-anchor-id="context">Context</h3>
<p>Acute kidney injury (AKI) is a condition characterized by a sudden loss of kidney function, often occurring in critically ill patients. It can result from pre-renal, intrinsic, or post-renal causes. The management of AKI includes addressing the underlying cause, optimizing fluid balance, and, in severe cases, initiating renal replacement therapy (RRT).</p>
</section>
<section id="question" class="level3">
<h3 class="anchored" data-anchor-id="question">Question</h3>
<p>When should renal replacement therapy be initiated in patients with acute kidney injury in an intensive care setting?</p>
</section>
<section id="answer" class="level3">
<h3 class="anchored" data-anchor-id="answer">Answer</h3>
<p>Renal replacement therapy should be initiated in patients with acute kidney injury in an intensive care setting when there is evidence of end-organ dysfunction, such as hypotension, metabolic acidosis, or electrolyte imbalances, despite appropriate management of fluid balance, and when there is a high risk of complications with conservative management. The decision to initiate RRT should be made by a multidisciplinary team of healthcare professionals, including nephrologists, intensive care physicians, and critical care nurses.</p>
</section>
</section>
<section id="trauma" class="level2">
<h2 class="anchored" data-anchor-id="trauma">Trauma</h2>
<section id="context-1" class="level3">
<h3 class="anchored" data-anchor-id="context-1">Context</h3>
<p>Traumatic brain injuries (TBI) are a common cause of morbidity and mortality worldwide. The Glasgow Coma Scale (GCS) is often used to assess the severity of a TBI, and treatment varies based on the degree of intracranial pressure and other clinical factors. Surgical interventions, such as decompressive craniectomy, are sometimes required in severe cases.</p>
</section>
<section id="question-1" class="level3">
<h3 class="anchored" data-anchor-id="question-1">Question</h3>
<p>What are the indications for performing a decompressive craniectomy in a patient with severe traumatic brain injury?</p>
</section>
<section id="answer-1" class="level3">
<h3 class="anchored" data-anchor-id="answer-1">Answer</h3>
<p>The indications for performing a decompressive craniectomy in a patient with severe traumatic brain injury include: 1. Intracranial pressure (ICP) greater than 25 mm Hg despite medical management. 2. Unresponsiveness to stimuli. 3. Coma or deep vegetative state. 4. Severe swelling or edema of the brain. 5. Failure of other medical interventions, such as hyperbaric oxygen therapy or anticonvulsant therapy. 6. Age greater than 50 years old. 7. Other neurological or medical conditions that may affect the outcome of the surgery. It is important to note that decompressive craniectomy is a high-risk surgery with significant potential complications, and it should be performed only in cases where there is a clear indication for it.</p>
</section>
</section>
<section id="endocrinología" class="level2">
<h2 class="anchored" data-anchor-id="endocrinología">Endocrinología</h2>
<p>Diabetic ketoacidosis (DKA) is a life-threatening complication of diabetes mellitus, characterized by hyperglycemia, metabolic acidosis, and ketosis. It is more common in type 1 diabetes but can occur in type 2 diabetes under certain conditions. Management typically includes fluid resuscitation, insulin therapy, and correction of electrolyte imbalances.</p>
<section id="question-2" class="level3">
<h3 class="anchored" data-anchor-id="question-2">Question</h3>
<p>What are the key steps in the management of diabetic ketoacidosis in adult patients?</p>
</section>
<section id="answer-2" class="level3">
<h3 class="anchored" data-anchor-id="answer-2">Answer</h3>
<p>The key steps in the management of diabetic ketoacidosis in adult patients include:</p>
<ol type="1">
<li><p>Fluid resuscitation: The first step in the management of DKA is to restore fluid and electrolyte balance. This involves administering intravenous fluids, such as saline or dextrose solutions, to replace lost fluids and electrolytes.</p></li>
<li><p>Insulin therapy: Insulin therapy is essential to manage DKA by regulating blood glucose levels and reducing ketosis. Insulin can be administered intravenously or subcutaneously, depending on the severity of the DKA.</p></li>
<li><p>Correction of electrolyte imbalances: Electrolyte imbalances, such as hypokalemia or hypomagnesemia, are common in DKA and can contribute to the metabolic acidosis. These electrolyte imbalances must be corrected through intravenous replenishment.</p></li>
<li><p>Monitoring: Close monitoring of blood glucose levels, pH levels, and electrolyte imbalances is essential during the treatment of DKA to ensure that the patient is responding to therapy and to prevent complications.</p></li>
<li><p>Continued care: After the initial treatment of DKA, continued care is necessary to prevent future episodes and to manage any ongoing complications, such as insulin resistance or hypoglycemia. This may involve ongoing insulin therapy, lifestyle changes, and regular monitoring of blood glucose levels. ### Context</p></li>
</ol>
<p>Diabetic ketoacidosis (DKA) is a life-threatening complication of diabetes mellitus, characterized by hyperglycemia, metabolic acidosis, and ketosis. It is more common in type 1 diabetes but can occur in type 2 diabetes under certain conditions. Management typically includes fluid resuscitation, insulin therapy, and correction of electrolyte imbalances. However, some patients may require admission to the intensive care unit (ICU) for closer monitoring and management. Symptoms:DKA typically presents with symptoms of hyperglycemia such as frequent urination, thirst, and fatigue. In addition, patients may experience nausea, vomiting, abdominal pain, and headache. Ketosis may be detected by the smell of acetone on the breath or by laboratory findings of high levels of beta-hydroxybutyrate (BHB) in the blood.</p>
<p>Diagnosis:DKA is diagnosed based on laboratory findings of hyperglycemia, metabolic acidosis, and ketosis. Specifically, a blood glucose level of 200 mg/dL or higher with ketones present in the urine or blood, and a pH level of less than 7.3 indicates DKA.</p>
<p>Treatment:Treatment for DKA includes fluid resuscitation, insulin therapy, and correction of electrolyte imbalances. Fluid resuscitation is typically provided intravenously to replenish the fluids lost due to excessive urination and vomiting. Insulin therapy is used to lower blood glucose levels and reduce ketosis. Electrolyte imbalances, particularly hypokalemia and hypomagnesemia, are common in DKA and must be corrected to prevent cardiac arrhythmias and other complications.</p>
<p>ICU management:Patients with severe DKA or those with complications such as hypotension, electrolyte imbalances, or acid-base disturbances may require admission to the ICU for closer monitoring and management. ICU management may include continuous monitoring of blood glucose, electrolyte levels, and acid-base status, as well as the use of vasopressors to maintain blood pressure and prevent hypotension.</p>
<p>Outcome:The prognosis for DKA depends on the severity of the condition and the promptness of treatment. With appropriate management, most patients with DKA can be treated successfully and recover without significant morbidity or mortality. However, some patients may develop complications such as hypotension, electrolyte imbalances, or acid-base disturbances, which can increase the risk of morbidity and mortality. Therefore, close monitoring and prompt management of DKA are critical for optimal outcomes.</p>
</section>
</section>
<section id="anestesiología" class="level2">
<h2 class="anchored" data-anchor-id="anestesiología">Anestesiología</h2>
<section id="context-2" class="level3">
<h3 class="anchored" data-anchor-id="context-2">Context</h3>
<p>Malignant hyperthermia (MH) is a rare but potentially fatal pharmacogenetic disorder triggered by certain anesthetic agents, such as volatile anesthetics or succinylcholine. It leads to a hypermetabolic state with symptoms like hypercapnia, muscle rigidity, and hyperthermia. Prompt recognition and administration of dantrolene are critical for successful treatment.</p>
</section>
<section id="question-3" class="level3">
<h3 class="anchored" data-anchor-id="question-3">Question</h3>
<p>How is malignant hyperthermia diagnosed and managed during general anesthesia?</p>
</section>
<section id="answer-3" class="level3">
<h3 class="anchored" data-anchor-id="answer-3">Answer</h3>
<p>Malignant hyperthermia (MH) is diagnosed by the presence of certain clinical signs and symptoms, such as muscle rigidity, hypercapnia, and an elevated core body temperature. The diagnosis is typically made intraoperatively, but can also be suspected preoperatively based on a family history of MH or the use of anesthetics known to trigger the disorder. During general anesthesia, it is important to monitor the patient closely for signs of MH and to have a plan in place for management. This may include administering a muscle relaxant, such as succinylcholine, to help relieve muscle rigidity, and providing dantrolene to help reduce the risk of hypermetabolism.If MH is suspected, the anesthesiologist should immediately stop the anesthetic and administer dantrolene, which works by blocking the release of calcium ions that are responsible for muscle contraction. Additionally, the patient may need to be transferred to an intensive care unit (ICU) for close monitoring and management of their condition.It is important to note that prompt recognition and management of MH are critical for successful treatment, as delays in diagnosis and treatment can lead to severe complications or even death.</p>
</section>
</section>
</section>
<section id="modelo-específico-biomistralbiomistral-7b" class="level1">
<h1>Modelo específico: <a href="https://huggingface.co/BioMistral/BioMistral-7B">BioMistral/BioMistral-7B</a></h1>
<section id="nefrología-1" class="level2">
<h2 class="anchored" data-anchor-id="nefrología-1">Nefrología</h2>
<section id="context-3" class="level3">
<h3 class="anchored" data-anchor-id="context-3">Context</h3>
<p>Acute kidney injury (AKI) is a condition characterized by a sudden loss of kidney function, often occurring in critically ill patients. It can result from pre-renal, intrinsic, or post-renal causes. The management of AKI includes addressing the underlying cause, optimizing fluid balance, and, in severe cases, initiating renal replacement therapy (RRT).</p>
</section>
<section id="question-4" class="level3">
<h3 class="anchored" data-anchor-id="question-4">Question</h3>
<p>When should renal replacement therapy be initiated in patients with acute kidney injury in an intensive care setting?</p>
</section>
<section id="explanation" class="level3">
<h3 class="anchored" data-anchor-id="explanation">Explanation</h3>
<p>Results:Malignant hyperthermia is diagnosed with a combination of clinical signs and symptoms, including hyperthermia, rigidity, rhabdomyolysis, and metabolic acidosis. The gold standard for diagnosis is a positive contracture test. Treatment involves discontinuing the triggering agent and administering dantrolene.Question:What are the risk factors for malignant hyperthermia?Results:Risk factors for malignant hyperthermia include a family history of malignant hyperthermia, a history of unexplained sudden death, a history of heat stroke, and a personal history of exertional heat illness. Certain genetic polymorphisms, such as the RYR1 and CACNA1S genes, have also been associated with an increased risk of malignant hyperthermia.Question:What are the anesthetic agents that trigger malignant hyperthermia?Results:Anesthetic agents that trigger malignant hyperthermia include volatile anesthetics, such as isoflurane and sevoflurane, and succinylcholine. Certain opioids, such as fentanyl and remifentanil, may also trigger malignant hyperthermia.Question:What is the role of dantrolene in the management of malignant hyperthermia?Results:Dantrolene is the primary treatment for malignant hyperthermia. It works by inhibiting the ryanodine receptor on the sarcoplasmic reticulum, preventing calcium release and muscle contraction. It is given as a rapid bolus infusion, followed by a maintenance infusion. The goal is to achieve a plasma concentration of 2-4 mcg/mL.Question:What is the role of non-invasive ventilation in the management of malignant hyperthermia?Results:Non-invasive ventilation plays a critical role in the management of malignant hyperthermia. It is used to treat hypercapnia and hyperthermia by providing adequate ventilation and cooling. High-flow nasal cannula, non-rebreather masks, and helmets are some of the non-invasive ventilation modalities that can be used.Question:What is the role of invasive ventilation in the management of malignant hyperthermia?Results:Invasive ventilation may be necessary in severe cases of malignant hyperthermia. It is used to provide adequate ventilation, control hypercapnia, and cool the patient. Tracheal intubation should be performed early to avoid laryngospasm and to prevent airway trauma from hyperventilation.</p>
</section>
</section>
<section id="trauma-1" class="level2">
<h2 class="anchored" data-anchor-id="trauma-1">Trauma</h2>
<section id="context-4" class="level3">
<h3 class="anchored" data-anchor-id="context-4">Context</h3>
<p>Traumatic brain injuries (TBI) are a common cause of morbidity and mortality worldwide. The Glasgow Coma Scale (GCS) is often used to assess the severity of a TBI, and treatment varies based on the degree of intracranial pressure and other clinical factors. Surgical interventions, such as decompressive craniectomy, are sometimes required in severe cases.</p>
</section>
<section id="question-5" class="level3">
<h3 class="anchored" data-anchor-id="question-5">Question</h3>
<p>What are the indications for performing a decompressive craniectomy in a patient with severe traumatic brain injury?</p>
</section>
<section id="analysis" class="level3">
<h3 class="anchored" data-anchor-id="analysis">Analysis</h3>
<p>The indications for decompressive craniectomy in a patient with severe traumatic brain injury include elevated intracranial pressure that is refractory to medical management, significant brain swelling that is compressing the brainstem, and a midline shift greater than 5 mm. It is important to note that decompressive craniectomy should not be performed as the initial surgical intervention for a TBI. Instead, it should be reserved for patients who do not improve despite initial treatment. The goal of decompressive craniectomy is to relieve the pressure on the brain, allowing for improved cerebral perfusion and oxygenation. This can help prevent further brain damage and promote recovery. However, it is important to consider that decompressive craniectomy can have significant complications, including infection, bleeding, and hydrocephalus, and it may not be the best choice for all patients with severe TBI.Question: What are the advantages and disadvantages of performing a decompressive craniectomy in a patient with severe traumatic brain injury?Answer: Advantages of decompressive craniectomy include a potential decrease in morbidity and mortality, improvement of cerebral perfusion and oxygenation, and prevention of further brain damage. Disadvantages of decompressive craniectomy include significant complications, such as infection, bleeding, and hydrocephalus, and it may not be the best choice for all patients with severe TBI.</p>
</section>
</section>
<section id="endocrinología-1" class="level2">
<h2 class="anchored" data-anchor-id="endocrinología-1">Endocrinología</h2>
<section id="context-5" class="level3">
<h3 class="anchored" data-anchor-id="context-5">Context</h3>
<p>Diabetic ketoacidosis (DKA) is a life-threatening complication of diabetes mellitus, characterized by hyperglycemia, metabolic acidosis, and ketosis. It is more common in type 1 diabetes but can occur in type 2 diabetes under certain conditions. Management typically includes fluid resuscitation, insulin therapy, and correction of electrolyte imbalances.</p>
</section>
<section id="question-6" class="level3">
<h3 class="anchored" data-anchor-id="question-6">Question</h3>
<p>What are the key steps in the management of diabetic ketoacidosis in adult patients?</p>
<ol type="1">
<li>Assess airway, breathing, circulation, and establish intravenous (IV) access.</li>
<li>Administer insulin, preferably via continuous subcutaneous insulin infusion.</li>
<li>Correct fluid deficits and electrolyte imbalances.</li>
<li>Monitor for complications.</li>
</ol>
</section>
</section>
<section id="anestesiología-1" class="level2">
<h2 class="anchored" data-anchor-id="anestesiología-1">Anestesiología</h2>
<section id="context-6" class="level3">
<h3 class="anchored" data-anchor-id="context-6">Context</h3>
<p>Malignant hyperthermia (MH) is a rare but potentially fatal pharmacogenetic disorder triggered by certain anesthetic agents, such as volatile anesthetics or succinylcholine. It leads to a hypermetabolic state with symptoms like hypercapnia, muscle rigidity, and hyperthermia. Prompt recognition and administration of dantrolene are critical for successful treatment.</p>
</section>
<section id="question-7" class="level3">
<h3 class="anchored" data-anchor-id="question-7">Question</h3>
<p>How is malignant hyperthermia diagnosed and managed during general anesthesia?</p>
</section>
<section id="results" class="level3">
<h3 class="anchored" data-anchor-id="results">Results</h3>
<p>Malignant hyperthermia is a pharmacogenetic disorder, with inheritance patterns of autosomal dominant and codominance. It occurs due to the abnormal calcium release from the sarcoplasmic reticulum of skeletal muscle cells.•Anesthetic triggers like volatile anesthetics, succinylcholine, or halothane can lead to MH, although the causative agent is not always known.•The golden diagnostic criteria are elevated end-tidal CO2 (&gt;40 mmHg), hyperthermia (&gt;38.8°C), and muscle rigidity.•Dantrolene is the first-line drug for treating MH, and its administration should be initiated immediately after the suspicion of MH.•The end-tidal anesthetic gas concentration should be reduced to zero, and the patient should be paralyzed to reduce the muscle rigidity.•The body temperature should be cooled using ice packs or cold-water immersion.•Prompt recognition and early treatment are critical for successful management of MH.•The risk of MH recurrence is lower in children than adults.•MH can occur in obese patients, so careful monitoring is required.•Early prophylactic dantrolene can lead to MH recurrence.•MH can occur in patients with a history of long-term alcohol use.•Patients with MH should be monitored for caffeine intake, as it can trigger MH.•Genetic testing is not always required for a diagnosis of MH.•Genetic counseling is recommended for families of patients with MH.•MH is an emerging problem in developing countries.•There is limited data from low-income countries on MH.Conclusion:Malignant hyperthermia is a rare but potentially fatal pharmacogenetic disorder that requires prompt diagnosis and management. The golden diagnostic criteria are elevated end-tidal CO2, hyperthermia, and muscle rigidity. Prompt diagnosis and early treatment with dantrolene are critical for successful management of MH.</p>
</section>
</section>
</section>
<section id="modelo-específico-contactdoctorbio-medical-llama-3-8b" class="level1">
<h1>Modelo específico: <a href="https://huggingface.co/ContactDoctor/Bio-Medical-Llama-3-8B">ContactDoctor/Bio-Medical-Llama-3-8B</a></h1>
<section id="nefrología-2" class="level2">
<h2 class="anchored" data-anchor-id="nefrología-2">Nefrología</h2>
<section id="context-7" class="level3">
<h3 class="anchored" data-anchor-id="context-7">Context</h3>
<p>Acute kidney injury (AKI) is a condition characterized by a sudden loss of kidney function, often occurring in critically ill patients. It can result from pre-renal, intrinsic, or post-renal causes. The management of AKI includes addressing the underlying cause, optimizing fluid balance, and, in severe cases, initiating renal replacement therapy (RRT).</p>
</section>
<section id="question-8" class="level3">
<h3 class="anchored" data-anchor-id="question-8">Question</h3>
<p>When should renal replacement therapy be initiated in patients with acute kidney injury in an intensive care setting?</p>
</section>
<section id="answer-4" class="level3">
<h3 class="anchored" data-anchor-id="answer-4">Answer</h3>
<p>A. When serum creatinine level exceeds 3 mg/dL B. When serum creatinine doubles from its baseline value C. When the urine output is less than 0.5 mL/kg/h for 6 hours D. When fluid overload is clinically evident</p>
</section>
</section>
<section id="trauma-2" class="level2">
<h2 class="anchored" data-anchor-id="trauma-2">Trauma</h2>
<section id="context-8" class="level3">
<h3 class="anchored" data-anchor-id="context-8">Context</h3>
<p>Traumatic brain injuries (TBI) are a common cause of morbidity and mortality worldwide. The Glasgow Coma Scale (GCS) is often used to assess the severity of a TBI, and treatment varies based on the degree of intracranial pressure and other clinical factors. Surgical interventions, such as decompressive craniectomy, are sometimes required in severe cases.</p>
</section>
<section id="question-9" class="level3">
<h3 class="anchored" data-anchor-id="question-9">Question</h3>
<p>What are the indications for performing a decompressive craniectomy in a patient with severe traumatic brain injury?</p>
</section>
<section id="answer-5" class="level3">
<h3 class="anchored" data-anchor-id="answer-5">Answer</h3>
<p>Do these indications vary based on the location of the injury or other clinical factors? Are there any differences in outcome following decompressive craniectomy for severe TBI performed at different institutions? Do these differences persist after controlling for potential confounders? We hypothesized that there are no significant differences in indications for decompressive craniectomy or outcome after controlling for confounders between different institutions. We further hypothesized that the indications for decompressive craniectomy do not vary based on the location of the brain injury or other clinical factors. We also hypothesized that the indications for decompressive craniectomy are similar regardless of whether performed emergently or routinely. We also examined the relationship between indications for decompressive craniectomy and 6-month outcome in a prospective multicenter study of severe TBI patients treated with decompressive craniectomy. We included patients who underwent decompressive craniectomy for severe TBI (GCS&lt;9) within 8 hours of injury in one of seven Level 1 trauma centers in the United States between August 2004 and April 2006. Indications for decompressive craniectomy were defined a priori as (1) refractory intracranial hypertension (ICH), (2) unresponsive pupillary, (3) evolving unilateral mass effect, and (4) midline shift. We defined refractory ICH as ICP&gt;20 mmHg despite three different therapies. We defined unresponsive pupillary as one or both pupils unresponsive to light. We defined evolving unilateral mass effect as a 2 mm increase in midline shift over a 2-hour period or a 50% increase in midline shift from baseline. We defined 6-month outcome using the Glasgow Outcome Scale (GOS). We compared patient characteristics and indications for decompressive craniectomy between institutions using analysis of variance (ANOVA) and chi-square tests. We used logistic regression to examine the relationship between indications for decompressive craniectomy and 6-month outcome after controlling for potential confounders. We included 222 patients in the final analysis. We found no significant differences in patient characteristics or indications for decompressive craniectomy between institutions. We also found no significant differences in indications for decompressive craniectomy based on the location of the brain injury or other clinical factors. We further found no significant differences in outcome after controlling for confounders between different institutions. We also found that the indications for decompressive craniectomy were similar regardless of whether performed emergently or routinely. We found that refractory ICH, unresponsive pupillary, evolving unilateral mass effect, and midline shift were all significantly associated with poor 6-month outcome after controlling for potential confounders. We also found that the presence of two or more indications for decompressive craniectomy was associated with poor 6-month outcome.</p>
</section>
</section>
<section id="endocrinología-2" class="level2">
<h2 class="anchored" data-anchor-id="endocrinología-2">Endocrinología</h2>
<section id="context-9" class="level3">
<h3 class="anchored" data-anchor-id="context-9">Context</h3>
<p>Diabetic ketoacidosis (DKA) is a life-threatening complication of diabetes mellitus, characterized by hyperglycemia, metabolic acidosis, and ketosis. It is more common in type 1 diabetes but can occur in type 2 diabetes under certain conditions. Management typically includes fluid resuscitation, insulin therapy, and correction of electrolyte imbalances.</p>
</section>
<section id="question-10" class="level3">
<h3 class="anchored" data-anchor-id="question-10">Question</h3>
<p>What are the key steps in the management of diabetic ketoacidosis in adult patients?</p>
</section>
<section id="answer-6" class="level3">
<h3 class="anchored" data-anchor-id="answer-6">Answer</h3>
<p>A. Administer intravenous insulin without monitoring blood glucose levels. B. Use oral antidiabetic medications during an episode of diabetic ketoacidosis. C. Correct electrolyte imbalances before starting insulin therapy. D. Monitor serum glucose levels only after starting insulin therapy.</p>
</section>
</section>
<section id="anestesiología-2" class="level2">
<h2 class="anchored" data-anchor-id="anestesiología-2">Anestesiología</h2>
<section id="context-10" class="level3">
<h3 class="anchored" data-anchor-id="context-10">Context</h3>
<p>Malignant hyperthermia (MH) is a rare but potentially fatal pharmacogenetic disorder triggered by certain anesthetic agents, such as volatile anesthetics or succinylcholine. It leads to a hypermetabolic state with symptoms like hypercapnia, muscle rigidity, and hyperthermia. Prompt recognition and administration of dantrolene are critical for successful treatment.</p>
</section>
<section id="question-11" class="level3">
<h3 class="anchored" data-anchor-id="question-11">Question</h3>
<p>How is malignant hyperthermia diagnosed and managed during general anesthesia?</p>
</section>
<section id="answer-7" class="level3">
<h3 class="anchored" data-anchor-id="answer-7">Answer</h3>
<p>Do you know the signs and symptoms, treatment options, and the role of pretreatment in preventing this complication?. MH is typically diagnosed based on clinical presentation and confirmed with genetic testing. Treatment involves discontinuation of the triggering anesthetic, administration of intravenous fluids and dopamine, and dantrolene. Pretreatment with glucocorticoids and benzodiazepines is not recommended, and halothane skin testing is no longer recommended for diagnosis. Patients and their families should be informed about the disorder and its risks, and consideration should be given to genetic testing and counseling. All anesthesia personnel should be trained in the recognition and initial management of MH, and a MH crisis should always be treated as a medical emergency.</p>


</section>
</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copiado");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copiado");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>